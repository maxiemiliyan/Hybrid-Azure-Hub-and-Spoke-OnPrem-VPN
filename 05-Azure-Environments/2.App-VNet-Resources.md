# Azure Application Virtual Network (App VNet)

## Overview

The **Azure Application Virtual Network (App VNet)** hosts application workloads that require **controlled access to on-premises resources**.  
This VNet represents the **business application tier** in the hybrid architecture.

The App VNet is designed to be **fully isolated** from the Management VNet and does not have direct access to on-premises resources. All communication is **forced through the Azure Hub VNet** for centralized security inspection and routing control.

---

## Purpose of the App VNet

The App VNet is designed to:

- Host application workloads
- Access on-premises resources securely
- Operate without direct internet exposure
- Prevent lateral movement to management workloads
- Enforce centralized security controls

This mirrors how enterprises deploy application environments in production.

---

## App VNet Address Space

| Component | Address Range |
|---------|---------------|
| App VNet | `10.2.0.0/16` |
| App Subnet | `10.2.1.0/24` |

The address space is unique and does not overlap with Hub, Management, or On-Prem networks.

---

## Application Workload

- Deployed as a virtual machine in the App subnet
- Represents a business application or service
- Requires access to:
  - On-premises internal resources (for example, storage or services)
- Does **not** require direct access to:
  - Management VNet
  - Internet (unless explicitly allowed via firewall policy)

---

## Network Isolation

The App VNet is isolated using the following controls:

- No direct VNet peering with Management VNet
- User Defined Routes applied to the App subnet
- All outbound traffic routed to Azure Firewall in the Hub VNet

This ensures that application traffic is always inspected and controlled.

---

## Routing Configuration

### User Defined Routes (UDRs)

The App subnet has a route table associated with the following key route:

Destination: 0.0.0.0/0
Next Hop: Virtual Appliance (Azure Firewall private IP)


This configuration forces all outbound traffic from the App VNet to pass through the Hub VNet.

---

## Traffic Flow

### App VNet → On-Prem Resource

**Traffic Path:**
App VNet → Hub VNet → Azure Firewall → VPN Gateway → RRAS → On-Prem Resource


- Traffic is inspected by Azure Firewall
- Traffic is encrypted over the IPsec VPN tunnel
- Direct access is not permitted

---

## Validation

The App VNet configuration is validated by:

- Confirming UDR association on the App subnet
- Testing connectivity to on-prem resources
- Verifying Azure Firewall logs show inspected traffic
- Ensuring no direct connectivity to Management VNet exists

---

## Outcome

The App VNet provides a **secure and isolated application environment** that can access on-premises resources only through centralized and controlled hybrid connectivity. This design ensures strong security boundaries while supporting real business application requirements.
